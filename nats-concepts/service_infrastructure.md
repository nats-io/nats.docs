# Инфраструктура сервисов NATS

NATS — это система клиент/сервер в том смысле, что у вас есть «клиентские приложения NATS» (приложения, использующие одну из клиентских библиотек NATS), которые подключаются к «серверам NATS», предоставляющим сервис NATS. Серверы NATS работают совместно, чтобы предоставить инфраструктуру сервиса NATS для своих клиентских приложений.

NATS чрезвычайно гибок и масштабируем и позволяет строить инфраструктуру сервиса от одного процесса, работающего локально на вашей машине, до «Интернета NATS» из Leaf Nodes и кластеров Leaf Nodes, безопасно взаимосвязанных через общий глобальный супер‑кластер NATS.

Независимо от размера и сложности используемой инфраструктуры, для клиентских приложений требуется лишь конфигурация местоположения (NATS URL) одного или нескольких серверов NATS и, в зависимости от требований безопасности, их учетные данные.

Обратите внимание: если ваше приложение написано на Golang, вы можете встроить функциональность NATS‑сервера прямо в приложение (однако тогда вам нужно будет конфигурировать экземпляры приложения параметрами nats-server).

Вы не обязаны запускать свою инфраструктуру NATS самостоятельно — можно использовать публичную инфраструктуру NATS, предоставляемую провайдером, например [Synadia Cloud](https://www.synadia.com/cloud?utm_source=nats_docs&utm_medium=nats). Рассматривайте Synadia Cloud как «Интернет NATS» (буквально «InterNATS») и Synadia как «провайдера InterNATS».

## Эволюция инфраструктуры NATS

Обычно вы начинаете с одного экземпляра nats-server на локальной машине разработки и подключаете к нему приложения во время разработки и локального тестирования.

Далее вы, вероятно, захотите тестировать и запускать приложения и серверы в VPC, регионе или on‑prem среде. Тогда вы развернете либо одиночный сервер NATS, либо кластеры серверов NATS в своих VPC/регионах/on‑prem локациях, и в каждой локации приложения будут подключаться к локальному nats-server или кластеру. Затем вы можете соединить эти локальные nats-server или кластеры, сделав их leaf nodes, подключенными к «backbone» кластеру или супер‑кластеру, либо соединяя их напрямую через gateway‑подключения.

Если у вас много клиентских приложений (например, приложения на пользовательских устройствах по всему Интернету или множество IoT‑устройств) или много серверов в разных локациях, вы масштабируете инфраструктуру NATS, развертывая кластеры NATS в нескольких локациях и у разных облачных провайдеров и VPC. Затем нужно соединить эти кластеры в глобальный супер‑кластер и разработать схему, чтобы направлять клиентские приложения к «ближайшему» кластеру NATS.

## Запуск собственной инфраструктуры NATS

Вы можете развернуть и запускать собственную инфраструктуру NATS из экземпляров nats-server, включающую серверы, кластеры серверов, супер‑кластер и leaf node серверы NATS.

### Соображения по виртуализации и контейнеризации

При использовании Kubernetes рекомендуем использовать [Helm charts](https://github.com/nats-io/k8s/tree/main/helm/charts/nats).
