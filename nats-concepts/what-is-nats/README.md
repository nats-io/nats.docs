# Что такое NATS

Программным приложениям и сервисам нужно обмениваться данными. NATS — это инфраструктура, которая позволяет такой обмен данными, разбитый на сообщения. Мы называем это "**message oriented middleware**".

С NATS разработчики приложений могут:

* Без усилий создавать распределенные и масштабируемые клиент‑серверные приложения.
* Хранить и распределять данные в реальном времени универсальным способом. Это гибко достигается в разных средах, языках, облачных провайдерах и on‑premises системах.

### Клиентские приложения NATS

Разработчики используют одну из клиентских библиотек NATS в коде приложения, чтобы публиковать, подписываться, запрашивать и отвечать между экземплярами приложения или между полностью отдельными приложениями. Такие приложения обычно называются «клиентскими приложениями» или просто «клиентами» в этом руководстве (поскольку с точки зрения сервера NATS они являются клиентами).

### Инфраструктура сервисов NATS

Сервисы NATS предоставляются одним или несколькими процессами NATS‑сервера, настроенными на взаимное соединение и образующими _инфраструктуру сервисов NATS_. Инфраструктура NATS может масштабироваться от одного процесса NATS‑сервера, работающего на конечном устройстве (процесс `nats-server` занимает менее 20 МБ!), до публичного глобального супер‑кластера из множества кластеров, охватывающего основных облачных провайдеров и регионы мира, например Synadia NGS.

### Подключение клиентских приложений NATS к серверам NATS

Чтобы подключить клиентское приложение NATS к сервису NATS и затем подписываться или публиковать сообщения в темы, достаточно настроить:

1. **URL:** ['NATS URL'](../../using-nats/developing-with-nats/connecting/#nats-url). Это строка (в формате URL), которая задает IP‑адрес и порт, где доступен(ы) сервер(ы) NATS, и тип соединения (обычный TCP, TLS или Websocket).
2. **Аутентификацию** (если нужно): параметры [Authentication](../../using-nats/developing-with-nats/connecting/#authentication-details), чтобы приложение могло идентифицироваться перед сервером(ами) NATS. NATS поддерживает несколько схем аутентификации (имя пользователя/пароль, децентрализованный JWT, токен, TLS‑сертификаты и Nkey с challenge).

## Простая модель обмена сообщениями

NATS упрощает коммуникацию приложений через отправку и получение сообщений. Эти сообщения адресуются и идентифицируются строками тем и не зависят от сетевого местоположения.

Данные кодируются и оформляются как сообщение и отправляются издателем. Сообщение принимается, декодируется и обрабатывается одним или несколькими подписчиками.

![](../../.gitbook/assets/intro.svg)

Благодаря этой простой модели NATS позволяет программам использовать общий код обработки сообщений, изолировать ресурсы и взаимозависимости и масштабироваться, легко справляясь с ростом объема сообщений — будь то запросы к сервисам или потоковые данные.

### Качество обслуживания (QoS) в NATS

NATS предлагает несколько уровней качества обслуживания в зависимости от того, использует ли приложение только функциональность _Core NATS_ или также задействует дополнительные возможности _NATS JetStream_ (JetStream встроен в `nats-server`, но может быть не включен во всех инфраструктурах сервиса).

* **QoS At most once:** _Core NATS_ предоставляет качество обслуживания **at most once**. Если подписчик не слушает тему (нет совпадения темы) или не активен в момент отправки сообщения, сообщение не будет получено. Это тот же уровень гарантий, что и у TCP/IP. _Core NATS_ — это система обмена сообщениями fire‑and‑forget. Она хранит сообщения только в памяти и никогда не записывает их напрямую на диск.
* **QoS At‑least / exactly once:** Если вам нужны более высокие уровни качества обслуживания (**at least once** и **exactly once**) или такие возможности, как персистентные потоки, развязанный контроль потока и Key/Value Store, вы можете использовать [NATS JetStream](../jetstream/), который встроен в сервер NATS (но должен быть включен). Разумеется, вы также всегда можете повысить надежность клиентских приложений самостоятельно, используя проверенные и масштабируемые подходы, такие как acknowledgements и номера последовательностей.
