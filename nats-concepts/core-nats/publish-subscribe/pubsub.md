# Публикация‑подписка

NATS реализует модель распределения сообщений publish‑subscribe для коммуникаций one‑to‑many. Издатель отправляет сообщение в subject, и любой активный подписчик, слушающий этот subject, получает сообщение. Подписчики также могут регистрировать интерес к subjects с wildcard, которые немного похожи на регулярные выражения \(но лишь отчасти\). Такой паттерн one‑to‑many иногда называют fan‑out.

![](../../../.gitbook/assets/pubsub.svg)

# Сообщения
Сообщения состоят из:  
1. Subject.  
2. Payload в виде массива байт.  
3. Любого числа полей заголовков.  
4. Необязательного поля адреса ответа `reply`.  
  
У сообщений есть максимальный размер (он задается в конфигурации сервера через `max_payload`). По умолчанию это 1 МБ, но при необходимости можно увеличить до 64 МБ (хотя мы рекомендуем держать максимальный размер сообщения на более разумном уровне, например 8 МБ).
