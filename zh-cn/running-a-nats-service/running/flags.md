# 标志

NATS 服务器有许多标志，可用于自定义其行为，而无需编写配置文件。

配置标志主要围绕以下方面：

* 服务器选项
* 日志记录
* 授权
* TLS 安全性
* 集群
* 信息

## 服务器选项

| 标志                  | 描述                                                                            |
| --------------------- | -------------------------------------------------------------------------------------- |
| `-a`, `--addr`, `--net` | 绑定的主机地址（默认：`0.0.0.0` - 代表所有接口）。                       |
| `-p`, `--port`        | NATS 客户端端口（默认：4222）。                                                      |
| `-n`, `--name`, `--server_name` | 服务器名称（默认 自动）。                                                   |
| `-P`, `--pid`         | 存储 进程 ID (PID) 的文件。                                                    |
| `-m`, `--http_port`   | HTTP 监控仪表板端口（与 `--https_port` 互斥）。                      |
| `-ms`, `--https_port` | HTTPS 监控仪表板端口（与 `--http_port` 互斥）。                           |
| `-c`, `--config`      | NATS 服务器配置文件路径。                                                |
| `-sl`, `--signal`     | 向 nats-server 进程发送信号。参见 [进程信号](../nats_admin/signals.md)。 |
| `--client_advertise`  | 向其他服务器通告的客户端 HostPort。                                         |
| `-t`                  | 测试配置并退出                                                            |
| `--ports_file_dir     | 在指定目录中创建端口文件（<executable_name>_<pid>.ports）。       |

## JetStream 选项

| 标志                 | 描述                     |
| -------------------- | ------------------------------- |
| `-js`, `--jetstream` | 启用 JetStream 功能。 |
| `-sd`, `--store_dir` | 设置存储目录。      |

## 认证选项

以下选项控制简单的认证：

| 标志     | 描述                                                                              |
| -------- | ---------------------------------------------------------------------------------------- |
| `--user` | 连接所需的 _用户名_（与 `--auth` 互斥）。                             |
| `--pass` | 连接所需的 _密码_（与 `--auth` 互斥）。                             |
| `--auth` | 连接所需的 _授权令牌_（与 `--user` 和 `--password` 互斥）。 |

有关更多信息，请参阅 [令牌认证](../configuration/securing_nats/auth_intro/tokens.md) 和 [用户名/密码](../configuration/securing_nats/auth_intro/username_password.md)。

## 日志选项

以下标志可用于服务器上配置日志记录：

| 标志                    | 描述                                                   |
| ----------------------- | ------------------------------------------------------------- |
| `-l`, `--log`           | 重定向日志输出的文件                                   |
| `-T`, `--logtime`       | 指定 `-T=false` 以禁用日志条目的时间戳            |
| `-s`, `--syslog`        | 将日志记录到 syslog 或 Windows 事件日志                            |
| `-r`, `--remote_syslog` | syslog 服务器地址，例如 `udp://localhost:514`         |
| `-D`, `--debug`         | 启用调试输出                                       |
| `-V`, `--trace`         | 启用协议跟踪日志消息                            |
| `-VV`                   | 详细跟踪（也跟踪系统账户）                 |
| `-DV`                   | 启用调试和协议跟踪消息                 |
| `-DVV`                  | 调试和详细跟踪（也跟踪系统账户）       |
| `--max_traced_msg_len`  | 跟踪消息的最大可打印长度。0 表示无限制 |
| `--max_traced_msg_len`   | 跟踪消息的最大可打印长度（默认：无限制） |

有关更多日志配置信息，请参阅 [日志配置](../configuration/logging.md)。

## TLS 选项

| 标志          | 描述                                |
| ------------- | ------------------------------------------ |
| `--tls`       | 启用 TLS，不验证客户端          |
| `--tlscert`   | 服务器证书文件                    |
| `--tlskey`    | 服务器证书的私钥                 |
| `--tlsverify` | 启用客户端 TLS 证书验证         |
| `--tlscacert` | 用于验证的客户端证书 CA         |

有关更多 TLS 配置信息，请参阅 [TLS 配置](/running-a-nats-service/configuration/securing_nats/tls.md)。

## 集群选项

以下标志可用于服务器上配置集群：

| 标志                  | 描述                                                 |
| --------------------- | ----------------------------------------------------------- |
| `--routes`            | 逗号分隔的集群 URL 列表，用于请求和连接                 |
| `--cluster`           | 集群 URL，用于集群请求                         |
| `--no_advertise`      | 不向客户端通告已知的集群信息                       |
| `--cluster_advertise` | 向其他服务器通告的集群 URL                   |
| `--connect_retries`   | 对于隐式路由，连接重试次数              |
| `--cluster_listen`    | 集群 URL，成员可以从该 URL 请求路由           |

有关更多集群配置信息，请参阅 [集群配置](/running-a-nats-service/configuration/clustering/README.md)。

## 常用选项

| 标志              | 描述       |
| ----------------- | ----------------- |
| `-h`, `--help`    | 显示帮助消息 |
| `-v`, `--version` | 显示版本      |
| `--help_tls`      | TLS 帮助          |
