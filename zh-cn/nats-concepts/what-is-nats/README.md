# 什么是 NATS

软件应用程序和服务需要交换数据。NATS 是一种基础设施，允许以消息的形式进行这种数据交换。我们称之为“**面向消息的中间件**”。

使用 NATS，应用程序开发者可以：

* 轻松构建分布式且可扩展的 客户端-服务器 应用程序。
* 以通用方式实时存储和分发数据。这可以在各种环境、语言、云提供商和本地系统之间灵活实现。

### NATS 客户端应用

开发者在他们的应用程序代码中使用 NATS 客户端库之一，以便能够在应用程序实例之间或完全独立的应用程序之间发布、订阅、请求和回复消息。这些应用程序通常被称为“客户端应用”（'client applications'），或者在本手册中有时简称为“客户端”（'clients'）（因为从 NATS 服务器的角度来看，它们都是客户端）。

### NATS 服务基础设施

NATS 服务由一个或多个 NATS 服务器进程提供，这些进程被配置为相互连接，从而形成一个 _NATS 服务基础设施_。NATS 服务基础设施可以从运行在终端设备上的单个 NATS 服务器进程（`nats-server` 进程的大小小于 20 MB！）扩展到跨越所有主要云提供商和全球所有地区的公共全球超级集群，例如 Synadia 的 NGS。

### 把 NATS 客户端应用连到 NATS 服务器

要把 NATS 客户端应用连到 NATS 服务器，并从主题订阅或发布消息，只需对其进行以下配置：

1. **URL：** 一个 ['NATS URL'](../../using-nats/developing-with-nats/connecting/#nats-url)。这是一个字符串（采用 URL 格式），用于指定可以访问 NATS 服务器的 IP 地址和端口，以及需要建立的连接类型（普通 TCP、TLS 或 WebSocket）。
2. **身份验证**（如果需要）：[身份验证](../../using-nats/developing-with-nats/connecting/#authentication-details)详细信息，用于客户端向 NATS 服务器证明自己的身份。NATS 支持多种身份验证方案（用户名/密码、去中心化的 JWT、令牌、TLS 证书，以及带有挑战的 Nkey）。

## 简单的消息设计

NATS 使应用程序通过发送和接收消息进行通信变得简单。这些消息通过主题字符串进行寻址和标识，而不依赖于网络位置。

数据被编码并封装为消息，由发布者发送。消息被一个或多个订阅者接收、解码并处理。

![](../../.gitbook/assets/intro.svg)

通过这种简单的设计，NATS 允许程序共享通用的消息处理代码，隔离资源和依赖关系，并通过轻松处理消息量的增加来扩展规模，无论是处理服务请求还是流数据。

### NATS 服务质量 (QoS)

NATS 提供了多种服务质量，具体取决于应用程序是仅使用 _Core NATS_ 功能，还是同时利用由 _NATS JetStream_ 启用的附加功能（JetStream 内置于 `nats-server` 中，但并非所有服务基础设施都启用）。

* **最多一次 QoS：** _Core NATS_ 提供一种 **最多一次** 的服务质量。如果订阅者未监听该主题（无主题匹配），或在消息发送时未处于活动状态，则不会收到消息。这是与 TCP/IP 提供的保证级别相同。_Core NATS_ 是一种“发送后即忘”的消息系统。它只会将消息保存在内存中，永远不会直接将消息写入磁盘。
* **至少一次 / 恰好一次 QoS：** 如果您需要更高的服务质量（**至少一次** 和 **恰好一次**），或需要持久化流媒体、解耦的流量控制和键值存储等功能，您可以使用 [NATS JetStream](../jetstream/)，它已内置在 NATS 服务器中（但需要启用）。当然，您也可以始终通过经过验证且可扩展的参考设计（例如 ACK、序列号）自行在客户端应用中构建额外的可靠性。