# 发布-订阅

NATS 实现了一种发布-订阅消息分发模型，用于一对多的通信。发布者将消息发送到某个主题（subject），任何正在监听该主题的活跃订阅者都会收到这条消息。订阅者还可以注册对通配符主题的兴趣，这些通配符主题的工作方式类似于阉割版正则表达式。这种一对多的模式有时也被称为扇出（fan-out）。

![](../../../.gitbook/assets/pubsub.svg)

# 消息
消息由以下几部分组成：  
1. 主题（subject）。  
2. 以字节数组形式表示的有效载荷（payload）。  
3. 任意数量的头部字段（header fields）。  
4. 可选的“回复”地址字段（reply address field）。  

消息具有最大大小限制（在服务器配置中通过 `max_payload` 设置）。默认情况下，该大小设置为 1 MB，但可以根据需要增加到最多 64 MB（尽管我们建议将最大消息大小保持在更合理的范围内，例如 8 MB）。