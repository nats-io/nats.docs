# Флаги

Сервер NATS имеет множество флагов для настройки поведения без необходимости писать конфигурационный файл.

Флаги конфигурации относятся к:

* Опции сервера
* Логи
* Авторизация
* Безопасность TLS
* Кластеризация
* Информация

## Опции сервера

| Флаг                  | Описание                                                                            |
| --------------------- | ----------------------------------------------------------------------------------- |
| `-a`, `--addr`, `--net` | Адрес хоста для привязки (по умолчанию: `0.0.0.0` — все интерфейсы).               |
| `-p`, `--port`        | Порт NATS для клиентов (по умолчанию: 4222).                                       |
| `-n`, `--name`, `--server_name` | Имя сервера (по умолчанию авто).                                          |
| `-P`, `--pid`         | Файл для хранения PID процесса.                                                    |
| `-m`, `--http_port`   | HTTP‑порт для панели мониторинга (взаимоисключающ. с `--https_port`).              |
| `-ms`, `--https_port` | HTTPS‑порт для панели мониторинга (взаимоисключающ. с `--http_port`).              |
| `-c`, `--config`      | Путь к конфигурационному файлу сервера NATS.                                       |
| `-sl`, `--signal`     | Отправить сигнал процессу nats-server. См. [сигналы процесса](../nats_admin/signals.md). |
| `--client_advertise`  | Client HostPort, объявляемый другим серверам.                                      |
| `-t`                  | Проверить конфигурацию и выйти.                                                    |
| `--ports_file_dir`    | Создает файл портов в указанной директории (<executable_name>_<pid>.ports).        |

## Опции JetStream

| Флаг                 | Описание                     |
| -------------------- | ---------------------------- |
| `-js`, `--jetstream` | Включить функциональность JetStream. |
| `-sd`, `--store_dir` | Задать каталог хранения.     |

## Опции аутентификации

Следующие опции управляют простой аутентификацией:

| Флаг     | Описание                                                                              |
| -------- | ------------------------------------------------------------------------------------ |
| `--user` | Требуемое _имя пользователя_ для подключений (взаимоисключ. с `--auth`).             |
| `--pass` | Требуемый _пароль_ для подключений (взаимоисключ. с `--auth`).                        |
| `--auth` | Требуемый _токен авторизации_ для подключений (взаимоисключ. с `--user` и `--password`). |

См. [аутентификацию по токену](../configuration/securing_nats/auth_intro/tokens.md) и [имя пользователя/пароль](../configuration/securing_nats/auth_intro/username_password.md) для подробностей.

## Опции логирования

Доступны следующие флаги для настройки логирования:

| Флаг                    | Описание                                                           |
| ----------------------- | ------------------------------------------------------------------- |
| `-l`, `--log`           | Файл для перенаправления вывода логов                               |
| `-T`, `--logtime`       | Укажите `-T=false`, чтобы отключить временные метки в логах         |
| `-s`, `--syslog`        | Логирование в syslog или журнал событий Windows                     |
| `-r`, `--remote_syslog` | Адрес syslog‑сервера, например `udp://localhost:514`                |
| `-D`, `--debug`         | Включить отладочный вывод                                           |
| `-V`, `--trace`         | Включить протокольную трассировку                                   |
| `-VV`                   | Подробная трассировка (включая системный аккаунт)                   |
| `-DV`                   | Включить и отладку, и протокольную трассировку                      |
| `-DVV`                  | Отладка и подробная трассировка (включая системный аккаунт)         |
| `--max_traced_msg_len`  | Максимальная печатаемая длина трассируемых сообщений. 0 — без ограничений |
| `--max_traced_msg_len`  | Максимальная печатаемая длина трассируемых сообщений (по умолчанию: без ограничений) |

Подробнее о [настройке логирования](../configuration/logging.md).

## Опции TLS

| Флаг          | Описание                                 |
| ------------- | ---------------------------------------- |
| `--tls`       | Включить TLS, не проверять клиентов       |
| `--tlscert`   | Файл сертификата сервера                  |
| `--tlskey`    | Приватный ключ сертификата сервера        |
| `--tlsverify` | Включить проверку TLS‑сертификата клиента |
| `--tlscacert` | CA сертификат клиента для проверки        |

Подробнее о [настройке TLS](/running-a-nats-service/configuration/securing_nats/tls.md).

## Опции кластера

Доступны следующие флаги для настройки кластеризации:

| Флаг                  | Описание                                                 |
| --------------------- | -------------------------------------------------------- |
| `--routes`            | Список URL кластеров через запятую для запросов и подключения |
| `--cluster`           | URL кластера для кластерных запросов                     |
| `--no_advertise`      | Не объявлять известную информацию о кластере клиентам    |
| `--cluster_advertise` | URL кластера, объявляемый другим серверам                |
| `--connect_retries`   | Для неявных маршрутов: количество попыток подключения    |
| `--cluster_listen`    | URL кластера, с которого участники могут запрашивать маршруты |

Подробнее о [конфигурации кластеризации](/running-a-nats-service/configuration/clustering/README.md).

## Общие опции

| Флаг              | Описание           |
| ----------------- | ------------------ |
| `-h`, `--help`    | Показать справку   |
| `-v`, `--version` | Показать версию    |
| `--help_tls`      | Справка по TLS     |
