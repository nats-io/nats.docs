# Аутентификация

Аутентификация NATS многоуровневая. Все режимы безопасности имеют уровень [_accounts_](../../../../running-a-nats-service/configuration/securing_nats/auth_intro) с [_users_](./#user-configuration-map), принадлежащими этим аккаунтам. Децентрализованная JWT‑аутентификация также имеет _operator_, которому принадлежат аккаунты.

У каждого аккаунта есть собственное независимое пространство имен subject: сообщение, опубликованное на subject `foo` в одном аккаунте, не будет видно подписчикам `foo` в других аккаунтах. Однако аккаунты могут определять exports и imports потоков subject, а также предоставлять request‑reply сервисы между аккаунтами. Пользователи внутри аккаунта разделяют одно пространство имен subject, но могут быть ограничены в публикации/подписке на конкретные subject.

## Методы аутентификации

Сервер NATS предоставляет несколько способов аутентифицировать клиентов:

- [Token Authentication](tokens.md)
- [Plain Text Username/Password credentials](username_password.md#plain-text-passwords)
- [Bcrypted Username/Password credentials](username_password.md#bcrypted-passwords)
- [TLS Certificate](tls_mutual_auth.md)
- [NKEY с challenge](nkey_auth.md)
- [Децентрализованная JWT‑аутентификация/авторизация](../jwt/)

Аутентификация отвечает за возможность клиенту NATS подключиться к серверу. За исключением JWT‑аутентификации, аутентификация и авторизация настраиваются в разделе `authorization` конфигурации. При JWT‑аутентификации информация об аккаунте и пользователе хранится в [resolver](../jwt/resolver.md), а не в конфигурационном файле сервера.

## Карта Authorization

Блок `authorization` предоставляет конфигурацию _аутентификации_ и [_авторизации_](../authorization.md):

| Свойство                                       | Описание                                                                                                                           |
| :--------------------------------------------- | :------------------------------------------------------------------------------------------------------------------------------------ |
| [`token`](tokens.md)                           | Задает глобальный токен, который можно использовать для аутентификации на сервере (взаимоисключается с user и password)              |
| [`user`](username_password.md#single-user)     | Задает единое _глобальное_ имя пользователя для клиентов сервера (взаимоисключается с token)                                         |
| [`password`](username_password.md)             | Задает единый _глобальный_ пароль для клиентов сервера (взаимоисключается с `token`)                                                 |
| [`users`](username_password.md#multiple-users) | Список [карт конфигурации пользователя](#user-configuration-map). Для нескольких учетных данных username/password задайте список `users`. |
| [`timeout`](auth_timeout.md)                   | Максимальное число секунд ожидания аутентификации клиента                                                                           |
| [`auth_callout`](../auth_callout.md)           | Включает расширение auth callout                                                                                                    |

<a id="user-configuration-map"></a>
## Карта конфигурации пользователя

Карта `user` задает учетные данные и параметры прав для одного пользователя:

| Свойство                             | Описание                                                                                                                                   |
| :----------------------------------- | :---------------------------------------------------------------------------------------------------------------------------------------- |
| [`user`](username_password.md)       | username для аутентификации клиента. (Также может быть пользователем для [tls authentication](tls_mutual_auth.md#mapping-client-certificates-to-a-user)) |
| [`password`](username_password.md)   | пароль для записи пользователя                                                                                                             |
| [`nkey`](nkey_auth.md)               | публичный nkey, идентифицирующий пользователя                                                                                              |
| [`permissions`](../authorization.md) | карта прав, настраивающая доступные пользователю subject                                                                                   |
